# RiverstonePlace | Voice-Only Property Sales Agent
Riverstone Place is an apartment development in Abbotsford, VIC. This project demonstrates a voice-only property sales agent designed to act as the first point of contact for potential buyers. The agent qualifies callers, provides accurate property information, handles objections, answers FAQs from a knowledge base, and books appointments via a mock booking API.

## 1. Stack & LLMs
### 1.1 Retell AI (voice agent platform)
- LLM: GPT-4o
- Agent Type: Single-prompt agent (rule-based flow + structured system prompt)
- Phone Connection: SIP trunking for inbound telephony
- Knowledge Settings:
  - Chunks to retrieve: 3
  - Similarity threshold: 0.6
  - Knowledge Base: FAQs, rules, and other information regarding the property
- Functions:
  - `book_appointment` (mock) -> Flask API (POST/book_appointment)
  - `end_call` -> ensures clean call termination

### 1.2 Booking Server (mock)
- A simple Flask API exposed via ngrok (used here for quick testing and tunneling, though in production it would be hosted on a lightweight service like Heroku or Render).

### 1.3 Post-Analysis Logging 
- Retell -> webhook -> Make.com -> JSON (module) -> Google Sheets (module)
  - Captures JSON log (lead details, `booking_id`, transcript, recording link)
  - Used for simple dashboard view, reporting, and testing 

## 2. Prompt / Flow Design & Grounding Approach
- Prompt Design: A structured system prompt that includes Role / Skills / Rules / Steps. 
- Key rules: capture minimum lead, make recommendations, objections handling, and ensure compliance.  
- Conversation Flow:
- Flow Overview:
  1. Greeting & Engagement (detect volunteered info).
  2. Active Qualification → capture required fields:
  3. Recommendation logic (budget-based suggestions).
  4. Objection handling (from knowledge base only).
  5. Appointment booking via book_appointment tool.
  6. Wrap-up & summary.
  7. Compliance & recovery (STOP → opt-out + end_call).

## 3. Guardrails 
- Agent is restricted to answer from knowledge pack only. 
- Finance/legal questions → always defer to a specialist, note in call log.
- Compliance → caller can opt-out by saying STOP; agent confirms and calls end_call.
- Recovery → handles silence (“Are you still there?”), mishears, or escalation with human hand-off.
- Budget phrasing → reads naturally (“around nine hundred K”), but internal logs keep numeric format (e.g. $900,000).

## 4. Logging & Transparency 
- AGENT PHONE NUMBER: +61 3 4420 3780
- Per-Call Artifacts:
  - Transcript (auto-generated by Retell).
  - Recording link (Retell).
  - JSON log (via webhook → Make.com → Sheets).
- TESTER ACCESS: Reviewer can view logs and transcripts directly in the shared Google Sheet "https://docs.google.com/spreadsheets/d/1LOFoyYwmsgOvSzyukbdWabIA5ORgltPGtn607i7S730/edit?usp=sharing"

## 5. Cost to Run 100 Calls
- Assumptions:
  - Avg call length: 5 minutes.
  - Retell Voice Agent: AU$0.125/min → 5 min = AU$0.625 per call → ~US$62.50 / 100 calls.
  - Twilio SIP trunking: ~AU$0.015/min → 5 min = AU$0.075 per call → ~US$7.50 / 100 calls.
  - Hosting (Flask Booking API): Small dyno on Heroku/Render: ~US$7–10/month. 
  - Make.com automation: ~US$15/month.
- Total Estimate (100 calls): ~US$95–100 including infra + logging.

## 6. Improvement 
- Upgrade booking server for reliability and production deployment
- Replace Make.com → direct backend integration with DB (Postgres/SQLite + API).
- Support multi-turn grounding with an external knowledge base (vector DB).
- Add live CRM sync (HubSpot/Salesforce) for production.
- Expand to multi-prompt or custom-LLM agent type for richer call flows.
- Optimize latency (sub-800ms turn-taking) and streamlined prompts.
- Better handling of currency in spoken language (currently reads natural phrasing, but can improve clarity)
